(this.webpackJsonpstokbarang=this.webpackJsonpstokbarang||[]).push([[0],{210:function(e,a,t){e.exports=t(403)},215:function(e,a,t){},403:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(81),i=t.n(c),l=(t(215),t(6)),s=t(3),o=t(7);var m=Object(o.b)(null,(function(e){return{signOut:function(){return e((function(e,a,t){(0,t.getFirebase)().auth().signOut().then((function(){e({type:"SIGNOUT_SUCCESS"})}))}))}}}))((function(e){var a=e.signOut,t=e.cabang,n=r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,r.a.createElement(l.c,{to:"/"},"Home")),r.a.createElement("li",null,r.a.createElement(l.c,{to:"/create"},"Barang Baru")),r.a.createElement("li",null,r.a.createElement("a",{href:"/#",onClick:a},"SignOut")),r.a.createElement("li",null,r.a.createElement(l.c,{to:"/",className:"btn btn-floating pink lighten-1"},t)));return r.a.createElement(r.a.Fragment,null,r.a.createElement("ul",{className:"right hide-on-med-and-down"},n),r.a.createElement("ul",{className:"sidenav",id:"slide-out"},n))}));function u(){var e=r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,r.a.createElement(l.c,{to:"/signup"},"SignUp")),r.a.createElement("li",null,r.a.createElement(l.c,{to:"/signin"},"SignIn")));return r.a.createElement(r.a.Fragment,null,r.a.createElement("ul",{className:"right hide-on-med-and-down"},e),r.a.createElement("ul",{className:"sidenav",id:"slide-out"},e))}var d=Object(o.b)((function(e){return{auth:e.firebaseReducer.auth,profile:e.firebaseReducer.profile}}))((function(e){var a=e.auth,t=e.profile,n=a.isEmpty?r.a.createElement(u,null):r.a.createElement(m,{cabang:t.cabang});return r.a.createElement("nav",{className:"nav-wrapper grey darken-3"},r.a.createElement("div",{className:"container"},r.a.createElement(l.b,{to:"/",className:"brand-logo"},"StokBarang"),r.a.createElement("a",{href:"/#","data-target":"mobile-demo",className:"sidenav-trigger"},r.a.createElement("i",{className:"material-icons"},"menu")),a.isLoaded&&n))}));function E(e){var a=e.notifications;return r.a.createElement("div",{className:"section"},r.a.createElement("div",{className:"card z-depth-0"},r.a.createElement("div",{className:"card-content"},r.a.createElement("span",{className:"card-title"},"Notifications"),r.a.createElement("ul",{className:"notifications"},a&&a.map((function(e){return r.a.createElement("li",{key:e.id},r.a.createElement("span",{className:"pink-text"},e.cabang," "),r.a.createElement("span",null,e.content," "),r.a.createElement("span",{className:"grey-text date-notifications"},e.time.toDate().toDateString()))}))))))}function g(e){var a=e.barang;return r.a.createElement("div",{className:"card z-depth-0 barang-summary"},r.a.createElement("div",{className:"card-content grey-text text-darken-3"},r.a.createElement("span",{className:"card-title"},a.nama),r.a.createElement("p",null,"Stok: ",a.stok),r.a.createElement("p",null,"Posted by ",a.cabang),r.a.createElement("p",{className:"grey-text"},a.createdAt.toDate().toDateString())))}function b(e){var a=e.barangs;return r.a.createElement("div",{className:"barang-list section"},a&&a.map((function(e){return r.a.createElement(l.b,{to:"/barang/".concat(e.id),key:e.id},r.a.createElement(g,{barang:e}))})))}var p=t(24),f=t(15);var h=Object(f.d)(Object(o.b)((function(e){return{barangs:e.firestoreReducer.ordered.barangs,auth:e.firebaseReducer.auth,notifications:e.firestoreReducer.ordered.notifications}})),Object(p.firestoreConnect)([{collection:"barangs",limit:5,orderBy:["createdAt","desc"]},{collection:"notifications",limit:5,orderBy:["time","desc"]}]))((function(e){var a=e.barangs,t=e.auth,n=e.notifications;return t.isLoaded&&t.isEmpty?r.a.createElement(s.a,{to:"/signin"}):r.a.createElement("div",{className:"dashboard container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12 m6"},r.a.createElement(b,{barangs:a})),r.a.createElement("div",{className:"col s12 m5 offset-m1"},r.a.createElement(E,{notifications:n}))))}));var v=Object(f.d)(Object(o.b)((function(e,a){var t=a.match.params.id,n=e.firestoreReducer.data.barangs;return{barang:n?n[t]:null,auth:e.firebaseReducer.auth}})),Object(p.firestoreConnect)((function(e){return[{collection:"barangs",doc:e.match.params.id}]})))((function(e){var a=e.barang,t=e.auth;return t.isLoaded&&t.isEmpty?r.a.createElement(s.a,{to:"/signin"}):r.a.createElement("div",{className:"container section barang-details"},a?r.a.createElement("div",{className:"card z-depth-0"},r.a.createElement("div",{className:"card-content"},r.a.createElement("span",{className:"card-title"},a.nama),r.a.createElement("p",null,"Stok: ",a.stok)),r.a.createElement("div",{className:"card-action lighten-4 grey-text"},r.a.createElement("div",null,"Posted by ",a.cabang),r.a.createElement("div",null,a.createdAt.toDate().toDateString()))):r.a.createElement("div",{className:"container center"},r.a.createElement("p",null,"Loading barang ...")))})),N=t(25),R=t(4),O=t(43);var S=Object(o.b)((function(e){return{authError:e.authReducer.authError,auth:e.firebaseReducer.auth}}),(function(e){return{signIn:function(a){return e((t=a,function(e,a,n){(0,n.getFirebase)().auth().signInWithEmailAndPassword(t.email,t.password).then((function(){e({type:"SIGNIN_SUCCESS"})})).catch((function(a){e({type:"SIGNIN_ERROR",err:a})}))}));var t}}}))((function(e){var a=e.signIn,t=e.authError,n=e.auth,c=r.a.useState({email:"",password:""}),i=Object(O.a)(c,2),l=i[0],o=i[1];function m(e){o(Object(R.a)(Object(R.a)({},l),{},Object(N.a)({},e.target.id,e.target.value)))}return n.isLoaded&&n.uid?r.a.createElement(s.a,{to:"/"}):r.a.createElement("div",{className:"container"},r.a.createElement("form",{className:"white",onSubmit:function(e){e.preventDefault(),a(l)}},r.a.createElement("h5",{className:"grey-text text-darken-3"},"Sign In"),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("input",{type:"email",id:"email",onChange:m})),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{type:"password",id:"password",onChange:m})),r.a.createElement("div",{className:"input-field"},r.a.createElement("button",{className:"btn pink lighten-1 z-depth-0"},"Login"),r.a.createElement("div",{className:"red-text center"},t&&r.a.createElement("p",null,t)))))}));var j=Object(o.b)((function(e){return{auth:e.firebaseReducer.auth,authError:e.authReducer.authError}}),(function(e){return{signUp:function(a){return e(function(e){return function(a,t,n){var r=n.getFirebase,c=n.getFirestore,i=r(),l=c();i.auth().createUserWithEmailAndPassword(e.email,e.password).then((function(a){return l.collection("users").doc(a.user.uid).set({cabang:e.cabang})})).then((function(){a({type:"SIGNUP_SUCCESS"})})).catch((function(e){a({type:"SIGNUP_ERROR",err:e})}))}}(a))}}}))((function(e){var a=e.auth,t=e.signUp,n=e.authError,c=r.a.useState({email:"",password:"",cabang:""}),i=Object(O.a)(c,2),l=i[0],o=i[1];function m(e){o(Object(R.a)(Object(R.a)({},l),{},Object(N.a)({},e.target.id,e.target.value)))}return a.isLoaded&&a.uid?r.a.createElement(s.a,{to:"/"}):r.a.createElement("div",{className:"container"},r.a.createElement("form",{className:"white",onSubmit:function(e){e.preventDefault(),t(l)}},r.a.createElement("h5",{className:"grey-text text-darken-3"},"Sign Up"),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("input",{type:"email",id:"email",onChange:m})),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{type:"password",id:"password",onChange:m})),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"cabang"},"Cabang"),r.a.createElement("input",{type:"text",id:"cabang",onChange:m})),r.a.createElement("div",{className:"input-field"},r.a.createElement("button",{className:"btn pink lighten-1 z-depth-0"},"SignUp"),r.a.createElement("div",{className:"red-text center"},n&&r.a.createElement("p",null,n)))))}));var y=Object(o.b)((function(e){return{auth:e.firebaseReducer.auth}}),(function(e){return{createBarang:function(a){return e(function(e){return function(a,t,n){n.getFirebase;var r=(0,n.getFirestore)(),c=t().firebaseReducer.profile.cabang,i=t().firebaseReducer.auth.uid;r.collection("barangs").add(Object(R.a)(Object(R.a)({},e),{},{cabang:c,cabangId:i,createdAt:new Date})).then((function(){a({type:"CREATE_BARANG",barang:e})})).catch((function(e){a({type:"CREATE_BARANG_ERROR",err:e})}))}}(a))}}}))((function(e){var a=e.createBarang,t=e.auth,n=e.history,c=r.a.useState({nama:"",stok:0}),i=Object(O.a)(c,2),l=i[0],o=i[1];function m(e){o(Object(R.a)(Object(R.a)({},l),{},Object(N.a)({},e.target.id,e.target.value)))}return t.isLoaded&&t.isEmpty?r.a.createElement(s.a,{tp:"/signin"}):r.a.createElement("div",{className:"container"},r.a.createElement("form",{className:"white",onSubmit:function(e){e.preventDefault(),a(l),n.push("/")}},r.a.createElement("h5",{className:"grey-text text-darken-3"},"Tambah Barang"),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"nama"},"Nama Barang"),r.a.createElement("input",{type:"text",id:"nama",onChange:m})),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"stok"},"Stok"),r.a.createElement("input",{type:"number",id:"stok",onChange:m})),r.a.createElement("div",{className:"input-field"},r.a.createElement("button",{className:"btn pink lighten-1 z-depth-0"},"Tambah Barang"))))}));var k=function(){return r.a.createElement(l.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(d,null),r.a.createElement(s.d,null,r.a.createElement(s.b,{exact:!0,path:"/",component:h}),r.a.createElement(s.b,{path:"/barang/:id",component:v}),r.a.createElement(s.b,{path:"/signin",component:S}),r.a.createElement(s.b,{path:"/signup",component:j}),r.a.createElement(s.b,{path:"/create",component:y}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var w={authError:null},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"SIGNIN_ERROR":return console.log("signin error"),Object(R.a)(Object(R.a)({},e),{},{authError:"Login failed"});case"SIGNIN_SUCCESS":return console.log("signin success"),Object(R.a)(Object(R.a)({},e),{},{authError:null});case"SIGNOUT_SUCCESS":return console.log("signout success"),e;case"SIGNUP_SUCCESS":return console.log("signup success"),Object(R.a)(Object(R.a)({},e),{},{authError:null});case"SIGNUP_ERROR":return Object(R.a)(Object(R.a)({},e),{},{authError:a.err.message});default:return e}},F={barangs:[{id:1,nama:"Beras Raja Lele",stok:20},{id:2,nama:"Gulaku",stok:15},{id:3,nama:"Minyak Goreng",stok:50}]},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"CREATE_BARANG":return console.log("created project",a.barang),e;case"CREATE_BARANG_ERROR":return console.log("created project error",a.err),e;default:return e}},A=t(44),x=Object(f.c)({authReducer:C,barangReducer:I,firestoreReducer:A.firestoreReducer,firebaseReducer:p.firebaseReducer}),U=t(209),B=t(133),G=t.n(B);t(207),t(401);G.a.initializeApp({apiKey:"AIzaSyBsLhUN64akTd3CR-TTQRmoG5WE6PAzyEY",authDomain:"stokbarang-a5ca9.firebaseapp.com",databaseURL:"https://stokbarang-a5ca9.firebaseio.com",projectId:"stokbarang-a5ca9",storageBucket:"stokbarang-a5ca9.appspot.com",messagingSenderId:"567346311466",appId:"1:567346311466:web:20d716f7f20bb386236e53",measurementId:"G-R1ZMCQ560D"});var _=G.a,P=Object(f.e)(x,Object(f.d)(Object(f.a)(U.a.withExtraArgument({getFirebase:p.getFirebase,getFirestore:A.getFirestore})),Object(A.reduxFirestore)(_))),D={firebase:_,useFirestoreForProfile:!0,config:{userProfile:"users",useFirestoreForProfile:!0},dispatch:P.dispatch,createFirestoreInstance:A.createFirestoreInstance};i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(o.a,{store:P},r.a.createElement(p.ReactReduxFirebaseProvider,D,r.a.createElement(k,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[210,1,2]]]);
//# sourceMappingURL=main.d0a56faf.chunk.js.map